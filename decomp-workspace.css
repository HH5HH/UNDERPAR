:root {
  color-scheme: light;
  --legacy-bg: #edf4ff;
  --legacy-panel: rgba(255, 255, 255, 0.8);
  --legacy-accent: #0064e0;
  --legacy-accent-hover: #004daf;
  --legacy-table-head: rgba(230, 241, 255, 0.97);
  --legacy-table-row: rgba(255, 255, 255, 0.96);
  --legacy-table-alt: rgba(245, 250, 255, 0.98);
  --legacy-hover: rgba(226, 242, 255, 0.98);
  --legacy-border: rgba(30, 64, 119, 0.18);
  --legacy-text: #0f1f39;
  --legacy-muted: #485b7a;
  --table-header-deep-red: #0b2d66;
  --ink: #0f1f39;
  --ink-muted: #41567a;
  --ink-soft: #687da0;
  --line-soft: rgba(19, 37, 63, 0.18);
  --line-faint: rgba(255, 255, 255, 0.78);
  --card-depth: 0 24px 42px rgba(12, 29, 61, 0.18), 0 8px 18px rgba(12, 29, 61, 0.11);
  --card-band-top: linear-gradient(148deg, rgba(255, 255, 255, 0.96), rgba(241, 248, 255, 0.98) 54%, rgba(233, 245, 255, 0.95));
  --card-band-bottom: linear-gradient(156deg, rgba(246, 251, 255, 0.98), rgba(233, 245, 255, 0.96));
  --accent: #0064e0;
  --accent-hover: #004daf;
  --s2-action-bg-default: rgba(255, 255, 255, 0.94);
  --s2-action-bg-hover: rgba(235, 246, 255, 0.97);
  --s2-action-border-default: rgba(23, 65, 127, 0.22);
  --s2-action-text-default: #17335d;
  --s2-action-bg-accent: #0064e0;
  --s2-action-bg-accent-hover: #004daf;
  --s2-action-border-accent: #0064e0;
  --s2-action-text-accent: #ffffff;
  --s2-action-focus-ring: rgba(0, 100, 224, 0.3);
  font-family: "Avenir Next", "Segoe UI Variable", "Gill Sans MT", "Trebuchet MS", sans-serif;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  min-height: 100vh;
  position: relative;
  isolation: isolate;
  overflow-x: hidden;
  background:
    radial-gradient(circle at 8% -12%, rgba(0, 100, 224, 0.22), rgba(0, 100, 224, 0) 46%),
    radial-gradient(circle at 92% -8%, rgba(33, 180, 246, 0.2), rgba(33, 180, 246, 0) 44%),
    radial-gradient(circle at 50% 120%, rgba(0, 68, 157, 0.16), rgba(0, 68, 157, 0) 50%),
    linear-gradient(180deg, #f6faff 0%, var(--legacy-bg) 48%, #edf5ff 100%);
  color: var(--legacy-text);
}

body::before,
body::after {
  content: "";
  position: fixed;
  inset: auto;
  width: 280px;
  height: 280px;
  border-radius: 999px;
  pointer-events: none;
  z-index: -1;
  filter: blur(2px);
}

body::before {
  top: 92px;
  right: -96px;
  background: radial-gradient(circle, rgba(52, 194, 255, 0.3) 0%, rgba(52, 194, 255, 0) 74%);
}

body::after {
  bottom: -130px;
  left: -104px;
  background: radial-gradient(circle, rgba(0, 100, 224, 0.24) 0%, rgba(0, 100, 224, 0) 74%);
}

.workspace-app {
  width: min(1380px, 100%);
  margin: 0 auto;
  padding: 18px;
  display: flex;
  flex-direction: column;
  gap: 14px;
  animation: workspace-enter 240ms ease-out;
}

.workspace-header {
  position: relative;
  border: 1px solid var(--legacy-border);
  border-radius: 18px;
  background: var(--legacy-panel);
  backdrop-filter: blur(8px);
  box-shadow: 0 12px 24px rgba(16, 45, 92, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.68);
  padding: 12px 14px;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
  animation: workspace-enter 260ms ease-out;
}

.workspace-header::before {
  content: "";
  position: absolute;
  left: 14px;
  right: 14px;
  top: 0;
  height: 3px;
  border-radius: 0 0 999px 999px;
  background: linear-gradient(90deg, rgba(47, 114, 201, 0.98), rgba(63, 168, 250, 0.98));
  pointer-events: none;
}

.workspace-title-wrap {
  min-width: 0;
  flex: 1 1 480px;
}

.workspace-title-row {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  min-width: 0;
}

.workspace-title-copy {
  min-width: 0;
  flex: 1 1 auto;
}

.workspace-controller-state {
  margin: 0;
  font-size: 12px;
  font-weight: 680;
  letter-spacing: 0.012em;
  color: var(--legacy-text);
}

.workspace-filter-state {
  margin: 4px 0 0;
  font-size: 12px;
  color: #35527e;
  font-weight: 560;
  word-break: break-word;
}

.workspace-actions {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.workspace-icon-btn {
  appearance: none;
  height: 36px;
  width: 36px;
  padding: 0;
  border-radius: 999px;
  border: 1px solid var(--s2-action-border-default);
  background: linear-gradient(180deg, var(--s2-action-bg-default), rgba(236, 247, 255, 0.96));
  color: var(--s2-action-text-default);
  line-height: 0;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 5px 11px rgba(17, 45, 89, 0.12);
  transition: transform 140ms ease, background-color 140ms ease, border-color 140ms ease, box-shadow 140ms ease;
}

.workspace-icon-btn--tearsheet {
  width: 44px;
  height: 44px;
}

.workspace-icon-btn--reference {
  width: 36px;
  height: 36px;
  border-color: rgba(23, 65, 127, 0.26);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.98), rgba(232, 245, 255, 0.96));
  color: #1b3f74;
  box-shadow: 0 7px 15px rgba(17, 45, 89, 0.16);
}

.workspace-icon-btn--accent {
  border-color: var(--s2-action-border-accent);
  background: linear-gradient(160deg, rgba(0, 100, 224, 0.98), rgba(0, 77, 175, 0.98));
  color: var(--s2-action-text-accent);
  box-shadow: 0 10px 20px rgba(0, 100, 224, 0.28), 0 2px 0 rgba(255, 255, 255, 0.36) inset;
}

.workspace-icon-btn--workspace-tearsheet {
  box-shadow: 0 12px 24px rgba(0, 100, 224, 0.3), 0 2px 0 rgba(255, 255, 255, 0.36) inset;
}

.workspace-icon-btn--rerun {
  border-color: rgba(107, 70, 17, 0.34);
  background: linear-gradient(180deg, rgba(255, 245, 222, 0.98), rgba(243, 221, 171, 0.98));
  color: #6b3a0f;
  box-shadow: 0 9px 18px rgba(133, 87, 11, 0.22);
}

.workspace-icon-btn:hover:not(:disabled) {
  background: var(--s2-action-bg-hover);
  transform: translateY(-2px);
  box-shadow: 0 10px 20px rgba(20, 52, 102, 0.18);
}

.workspace-icon-btn--reference:hover:not(:disabled) {
  background: linear-gradient(180deg, rgba(244, 251, 255, 0.98), rgba(220, 238, 255, 0.97));
  border-color: rgba(16, 58, 117, 0.34);
}

.workspace-icon-btn--accent:hover:not(:disabled) {
  background: var(--s2-action-bg-accent-hover);
  border-color: var(--s2-action-bg-accent-hover);
}

.workspace-icon-btn--workspace-tearsheet:hover:not(:disabled) {
  box-shadow: 0 14px 25px rgba(0, 88, 196, 0.33), 0 2px 0 rgba(255, 255, 255, 0.36) inset;
}

.workspace-icon-btn--rerun:hover:not(:disabled) {
  background: linear-gradient(180deg, rgba(255, 240, 201, 0.98), rgba(237, 208, 141, 0.98));
  border-color: rgba(120, 76, 14, 0.46);
  box-shadow: 0 12px 22px rgba(133, 87, 11, 0.26);
}

.workspace-icon-btn:disabled {
  opacity: 0.64;
  cursor: default;
}

.workspace-icon-btn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px var(--s2-action-focus-ring);
}

.workspace-icon {
  width: 16px;
  height: 16px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
}

.workspace-icon--tearsheet {
  width: 20px;
  height: 20px;
}

.workspace-net-indicator {
  width: 14px;
  height: 14px;
  border-radius: 999px;
  border: 2px solid rgba(90, 57, 15, 0.24);
  border-top-color: rgba(90, 57, 15, 0.78);
  animation: workspace-net-spin 0.8s linear infinite;
  flex: 0 0 auto;
}

.workspace-icon-btn--rerun.net-busy {
  cursor: progress;
}

.workspace-icon-btn--rerun.net-busy .workspace-icon--rerun-glyph {
  display: none;
}

.workspace-icon svg {
  width: 100%;
  height: 100%;
  fill: none;
  stroke: currentColor;
  stroke-width: 1.75;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.workspace-status {
  margin: 0;
  min-height: 18px;
  font-size: 12px;
  font-weight: 560;
  color: #2e4f7d;
  animation: workspace-enter 300ms ease-out;
}

.workspace-status.error {
  color: #8e2b24;
}

@keyframes workspace-net-spin {
  to {
    transform: rotate(360deg);
  }
}

.workspace-lock-banner {
  border: 1px solid rgba(178, 49, 49, 0.36);
  border-radius: 14px;
  background: linear-gradient(180deg, rgba(255, 245, 245, 0.98), rgba(255, 234, 234, 0.95));
  box-shadow: 0 10px 20px rgba(133, 35, 35, 0.14);
  padding: 12px 14px;
}

.workspace-lock-message {
  margin: 0;
  font-size: 12.5px;
  line-height: 1.45;
  color: #812720;
  font-weight: 620;
  letter-spacing: 0.01em;
}

.workspace-lock-message a {
  color: #8b2f28;
  font-weight: 760;
}

.workspace-lock-message a:hover {
  color: #6e231d;
}

.workspace-cards {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

body.workspace-locked .workspace-cards {
  opacity: 0.52;
  filter: saturate(0.8) blur(0.4px);
  pointer-events: none;
}

@keyframes workspace-enter {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.report-card {
  position: relative;
  border: 1px solid rgba(21, 52, 99, 0.14);
  border-radius: 26px;
  background: var(--card-band-top);
  box-shadow: var(--card-depth);
  overflow: hidden;
  isolation: isolate;
  animation: card-rise 280ms ease-out both;
}

.report-card:nth-child(2) {
  animation-delay: 40ms;
}

.report-card:nth-child(3) {
  animation-delay: 70ms;
}

.report-card:nth-child(4) {
  animation-delay: 95ms;
}

.report-card::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  border: 1px solid rgba(255, 255, 255, 0.44);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.76), inset 0 -1px 0 rgba(22, 50, 95, 0.16);
  pointer-events: none;
  z-index: 3;
}

.card-head {
  position: relative;
  z-index: 1;
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  align-items: start;
  gap: 10px;
  padding: 15px 20px 10px;
  background: var(--card-band-top);
}

.card-title-wrap {
  min-width: 0;
}

.card-title {
  margin: 0;
  font-size: 11.4px;
  font-weight: 560;
  color: rgba(33, 59, 103, 0.7);
  line-height: 1.3;
  overflow-wrap: anywhere;
  white-space: normal;
  letter-spacing: 0.016em;
  text-shadow: 0 1px rgba(255, 255, 255, 0.9), 0 -1px rgba(66, 101, 150, 0.13);
}

.card-url-context {
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(220px, 0.94fr);
  align-items: start;
  gap: 6px 14px;
  width: 100%;
}

.card-url-path {
  min-width: 0;
  display: inline-flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 4px;
}

.card-url-path-segment {
  max-width: 100%;
  padding: 0;
  border: none;
  background: transparent;
  color: rgba(22, 55, 102, 0.9);
  font-size: 10.8px;
  font-weight: 520;
  letter-spacing: 0.012em;
  text-shadow: none;
  white-space: nowrap;
}

.card-url-path-link {
  text-decoration: none;
  cursor: pointer;
}

.card-url-path-link:hover {
  color: rgba(12, 43, 84, 0.96);
  text-decoration: none;
}

.card-url-path-link:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgba(0, 100, 224, 0.2);
  border-radius: 3px;
}

.card-url-path-segment-terminal {
  font-weight: 700;
  color: rgba(16, 47, 91, 0.98);
}

.card-url-path-segment-empty {
  color: rgba(62, 92, 132, 0.74);
  font-weight: 520;
}

.card-url-path-divider {
  color: rgba(72, 104, 149, 0.62);
  font-size: 10px;
  font-weight: 600;
}

.card-url-divider {
  display: none;
}

.card-url-query-cloud {
  min-width: 0;
  display: flex;
  flex-wrap: wrap;
  justify-content: flex-end;
  align-items: baseline;
  gap: 6px 12px;
  text-align: right;
}

.card-url-query-chip {
  display: inline-block;
  max-width: 100%;
  padding: 0;
  border-radius: 0;
  border: none;
  background: transparent;
  color: rgba(30, 63, 108, 0.9);
  font-size: 10.5px;
  font-weight: 560;
  letter-spacing: 0.018em;
  font-variant-numeric: tabular-nums;
  white-space: nowrap;
}

.card-url-query-key {
  font-weight: 700;
  color: rgba(18, 53, 98, 0.92);
  white-space: nowrap;
}

.card-url-query-eq {
  margin: 0;
  color: rgba(60, 93, 140, 0.62);
  white-space: nowrap;
}

.card-url-query-value {
  display: inline-block;
  max-width: 170px;
  margin-left: 0;
  color: rgba(34, 66, 110, 0.84);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  vertical-align: bottom;
}

.card-url-query-empty,
.card-url-empty {
  color: rgba(78, 103, 140, 0.74);
  font-style: italic;
}

.card-subtitle {
  margin: 4px 0 0;
  font-size: 10.8px;
  font-weight: 560;
  color: rgba(54, 81, 126, 0.74);
  text-shadow: 0 1px rgba(255, 255, 255, 0.86), 0 -1px rgba(70, 105, 153, 0.11);
  letter-spacing: 0.022em;
}

.card-actions {
  display: flex;
  align-items: center;
  justify-content: flex-end;
}

.card-close {
  appearance: none;
  width: 20px;
  height: 20px;
  border: none;
  background: transparent;
  border-radius: 999px;
  color: rgba(44, 70, 113, 0.72);
  line-height: 0;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  text-shadow: 0 1px var(--line-faint), 0 -1px rgba(50, 74, 116, 0.16);
  transition: color 120ms ease, transform 120ms ease;
}

.card-close-icon {
  width: 12px;
  height: 12px;
  fill: none;
  stroke: currentColor;
  stroke-width: 1.75;
  stroke-linecap: round;
}

.card-close:hover {
  color: rgba(17, 46, 88, 0.9);
  transform: translateY(-1px);
}

.card-close:focus {
  outline: none;
  box-shadow: 0 0 0 2px rgba(0, 100, 224, 0.24);
}

.card-body {
  position: relative;
  z-index: 1;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 0;
}

.card-message {
  margin: 0;
  min-height: clamp(160px, 30vh, 280px);
  padding: 14px 18px;
  border-radius: 0;
  border: none;
  background: var(--card-band-top);
  box-shadow: none;
  font-size: 12.5px;
  color: #39547c;
  white-space: pre-wrap;
}

.card-message.error {
  background: linear-gradient(180deg, rgba(255, 244, 243, 0.96), rgba(249, 222, 220, 0.92));
  color: #8e2b24;
}

.esm-table-wrapper {
  --esm-visible-rows: 10;
  --esm-row-height: 36px;
  --esm-header-height: 42px;
  --esm-footer-height: 40px;
  width: 100%;
  max-height: calc(var(--esm-header-height) + var(--esm-footer-height) + (var(--esm-row-height) * var(--esm-visible-rows)));
  overflow: auto;
  border: none;
  border-radius: 0;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(240, 249, 255, 0.97));
  box-shadow: none;
}

.esm-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  table-layout: auto;
  font-size: 13px;
  color: var(--ink);
}

.esm-table th,
.esm-table td {
  padding: 8px 12px;
  border-bottom: 1px solid rgba(23, 65, 127, 0.14);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  text-align: left;
}

.esm-table thead th {
  position: sticky;
  top: 0;
  background: var(--legacy-table-head);
  z-index: 1;
  cursor: pointer;
  font-size: 13.2px;
  font-weight: 740;
  color: var(--table-header-deep-red);
  text-shadow: 0 1px rgba(255, 255, 255, 0.8);
}

.sort-icon {
  color: #20498f;
}

.esm-table tfoot td {
  position: sticky;
  bottom: 0;
  z-index: 2;
  background: linear-gradient(180deg, rgba(245, 252, 255, 0.98), rgba(234, 246, 255, 0.98));
  box-shadow: none;
}

.esm-table tbody tr:nth-child(odd) {
  background: var(--legacy-table-row);
}

.esm-table tbody tr:nth-child(even) {
  background: var(--legacy-table-alt);
}

.esm-table tbody tr:hover {
  background: var(--legacy-hover);
}

.esm-table th.active-sort {
  color: var(--legacy-accent);
  font-weight: 740;
  text-decoration: none;
}

.esm-table th.active-sort .sort-icon {
  color: var(--legacy-accent);
}

.esm-footer {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
}

.esm-footer a {
  color: var(--legacy-accent);
  text-decoration: none;
  cursor: pointer;
  font-size: 13px;
  font-weight: 700;
  letter-spacing: 0.03em;
  text-transform: uppercase;
}

.esm-footer a:hover {
  color: var(--legacy-accent-hover);
}

.esm-last-modified {
  margin-left: auto;
  margin-right: 2px;
  font-size: 12px;
  font-weight: 500;
  color: #476086;
}

.esm-close {
  font-weight: 700;
  font-size: 14px;
  color: rgba(40, 63, 101, 0.76);
  cursor: pointer;
  user-select: none;
}

.esm-close:hover {
  color: rgba(16, 40, 80, 0.9);
}

.card-col-list {
  margin: 0;
  border: none;
  border-radius: 0;
  padding: 12px 16px 14px;
  background: var(--card-band-bottom);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.82);
  color: rgba(47, 74, 115, 0.9);
  font-size: 12px;
}

.card-col-layout {
  display: grid;
  grid-template-columns: minmax(190px, 32%) minmax(0, 1fr);
  gap: 18px;
  align-items: stretch;
}

.card-col-node {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 84px;
}

.card-col-parent-url {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  min-height: 84px;
  margin: 0;
  color: rgba(15, 52, 109, 0.96);
  text-decoration: none;
  font-size: clamp(28px, 3vw, 38px);
  font-weight: 820;
  letter-spacing: 0.03em;
  cursor: pointer;
  text-shadow: 0 1px rgba(255, 255, 255, 0.76), 0 -1px rgba(68, 113, 167, 0.2);
}

.card-col-parent-url:hover {
  color: rgba(6, 43, 97, 0.96);
}

.card-col-parent-url-empty {
  cursor: default;
  color: rgba(73, 97, 136, 0.74);
}

.card-col-columns {
  display: flex;
  flex-wrap: wrap;
  justify-content: flex-end;
  align-content: center;
  gap: 5px 12px;
  margin: 0;
  min-height: 84px;
  text-align: right;
}

.card-col-chip {
  display: inline-flex;
  align-items: center;
  max-width: 100%;
  padding: 0;
  border: none;
  border-radius: 0;
  background: transparent;
  color: rgba(34, 64, 106, 0.94);
  font-size: 12px;
  font-weight: 620;
  letter-spacing: 0.03em;
  white-space: nowrap;
}

.card-col-chip:nth-child(3n + 1) {
  font-size: 13px;
  font-weight: 700;
}

.card-col-chip:nth-child(3n) {
  font-size: 11px;
  font-weight: 560;
  opacity: 0.9;
}

.card-col-empty {
  font-style: italic;
  color: rgba(75, 97, 131, 0.78);
}

@keyframes card-rise {
  from {
    opacity: 0;
    transform: translateY(8px) scale(0.992);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@media (max-width: 900px) {
  .workspace-app {
    padding: 12px;
  }

  .workspace-header {
    padding: 10px;
  }

  .workspace-title-row {
    align-items: flex-start;
  }

  .workspace-icon-btn--reference {
    width: 34px;
    height: 34px;
  }

  .card-head {
    grid-template-columns: minmax(0, 1fr);
    padding: 12px 14px 8px;
  }

  .card-url-context {
    grid-template-columns: 1fr;
    gap: 6px;
  }

  .card-url-divider {
    display: none;
  }

  .card-url-query-cloud {
    justify-content: flex-start;
    text-align: left;
  }

  .card-url-query-value {
    max-width: 220px;
  }

  .card-actions {
    justify-content: flex-end;
  }

  .card-body {
    padding: 0;
  }

  .card-col-layout {
    grid-template-columns: 1fr;
    gap: 10px;
  }

  .card-col-node {
    min-height: 56px;
  }

  .card-col-parent-url {
    min-height: 56px;
    justify-content: flex-start;
    font-size: clamp(24px, 7vw, 34px);
  }

  .card-col-columns {
    justify-content: flex-start;
    text-align: left;
    min-height: 0;
  }

  .esm-table th,
  .esm-table td {
    padding: 7px 10px;
  }
}
